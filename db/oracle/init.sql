CONNECT sys/root@localhost:1521 AS SYSDBA;

CREATE TABLE daemon
(
    id           NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    host         VARCHAR2(255 CHAR) NOT NULL,
    port         NUMBER NOT NULL,
    name         VARCHAR2(255 CHAR) NOT NULL,
    date_created TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    date_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE storage
(
    id           NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    host         VARCHAR2(255 CHAR) NOT NULL,
    port         NUMBER NOT NULL,
    dbms         VARCHAR2(50 CHAR) NOT NULL,
    name         VARCHAR2(255 CHAR) NOT NULL,
    username     VARCHAR2(255 CHAR) NOT NULL,
    password     VARCHAR2(255 CHAR) NOT NULL,
    date_created TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    date_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE blueprint
(
    id           NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name         VARCHAR2(255 CHAR) NOT NULL,
    data         CLOB NOT NULL,
    is_remote    NUMBER(1),
    storage_id   NUMBER,
    date_created TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    date_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT fk_storage FOREIGN KEY (storage_id) REFERENCES storage (id)
);
